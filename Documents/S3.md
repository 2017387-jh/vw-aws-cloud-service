# S3 (Simple Storage Service) ìŠ¤í¬ë¦½íŠ¸ ê°€ì´ë“œ

## ê°œìš”
Amazon S3ëŠ” ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ë¡œ, ì…ë ¥ ì´ë¯¸ì§€ì™€ ì²˜ë¦¬ëœ ì¶œë ¥ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ë‘ ê°œì˜ ë¶„ë¦¬ëœ ë²„í‚·ì„ ì‚¬ìš©í•˜ì—¬ ì…ë ¥ê³¼ ì¶œë ¥ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ê³ , ë³´ì•ˆ ì„¤ì •ì„ í†µí•´ ì•ˆì „í•œ ë°ì´í„° ê´€ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“ ê´€ë ¨ íŒŒì¼
```
script/
â”œâ”€â”€ s3_create_bucket.sh     # S3 ë²„í‚· ìƒì„±
â”œâ”€â”€ s3_delete_bucket.sh     # S3 ë²„í‚· ì‚­ì œ
â”œâ”€â”€ s3_upload_file.sh       # íŒŒì¼ ì—…ë¡œë“œ (ì§ì ‘)
â””â”€â”€ s3_download_file.sh     # íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ì§ì ‘)
```

## ğŸ—ï¸ s3_create_bucket.sh

### ê¸°ëŠ¥
- ì…ë ¥/ì¶œë ¥ìš© S3 ë²„í‚· ìƒì„±
- ë³´ì•ˆ ì„¤ì • (í¼ë¸”ë¦­ ì ‘ê·¼ ì°¨ë‹¨)
- ë²„ì „ ê´€ë¦¬ í™œì„±í™”

### ìƒì„¸ ë¶„ì„

#### 1. í™˜ê²½ ì„¤ì •
```bash
#!/usr/bin/env bash
set -euo pipefail
source .env
aws configure set region "$AWS_REGION"
```
- ì—„ê²©í•œ ì—ëŸ¬ ì²˜ë¦¬ ëª¨ë“œ
- í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
- AWS CLI ë¦¬ì „ ì„¤ì •

#### 2. ë²„í‚· ìƒì„± ë£¨í”„
```bash
for b in "$DDN_IN_BUCKET" "$DDN_OUT_BUCKET"; do
  echo "[INFO] Creating bucket: $b"
  aws s3api create-bucket \
    --bucket "$b" \
    --create-bucket-configuration LocationConstraint="$AWS_REGION" || true
```
- **ë°˜ë³µ ì²˜ë¦¬**: ì…ë ¥ ë° ì¶œë ¥ ë²„í‚·ì„ ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ ìƒì„±
- **ë¦¬ì „ ì œì•½**: ë²„í‚·ì„ íŠ¹ì • ë¦¬ì „ì— ìƒì„±
- **ë©±ë“±ì„±**: `|| true`ë¡œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë²„í‚·ë„ ì˜¤ë¥˜ ì—†ì´ ì²˜ë¦¬

**ë²„í‚·ëª…**:
- `ddn-in-bucket`: í´ë¼ì´ì–¸íŠ¸ê°€ ì—…ë¡œë“œí•˜ëŠ” ì›ë³¸ ì´ë¯¸ì§€ ì €ì¥
- `ddn-out-bucket`: ì²˜ë¦¬ëœ ê²°ê³¼ ì´ë¯¸ì§€ ì €ì¥

#### 3. í¼ë¸”ë¦­ ì ‘ê·¼ ì°¨ë‹¨ ì„¤ì •
```bash
aws s3api put-public-access-block --bucket "$b" \
  --public-access-block-configuration BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true
```

**ë³´ì•ˆ ì„¤ì • ìƒì„¸**:
- **BlockPublicAcls=true**: ìƒˆë¡œìš´ í¼ë¸”ë¦­ ACL ì—…ë¡œë“œ ë° ì ìš© ì°¨ë‹¨
- **IgnorePublicAcls=true**: ê¸°ì¡´ í¼ë¸”ë¦­ ACL ë¬´ì‹œ
- **BlockPublicPolicy=true**: í¼ë¸”ë¦­ ì ‘ê·¼ì„ í—ˆìš©í•˜ëŠ” ë²„í‚· ì •ì±… ì°¨ë‹¨  
- **RestrictPublicBuckets=true**: ê³„ì • ë ˆë²¨ì—ì„œ í¼ë¸”ë¦­ ì •ì±… ì ìš© ê¸ˆì§€

ì´ ì„¤ì •ì„ í†µí•´ ë°ì´í„° ìœ ì¶œ ë°©ì§€ ë° AWS ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ ì¤€ìˆ˜

#### 4. ë²„ì „ ê´€ë¦¬ í™œì„±í™”
```bash
aws s3api put-bucket-versioning --bucket "$b" \
  --versioning-configuration Status=Enabled
```
- **ëª©ì **: íŒŒì¼ ë®ì–´ì“°ê¸° ì‹œ ì´ì „ ë²„ì „ ë³´ì¡´
- **ì¥ì **: ì‹¤ìˆ˜ë¡œ ì‚­ì œ/ìˆ˜ì •ëœ íŒŒì¼ ë³µêµ¬ ê°€ëŠ¥
- **ë¹„ìš©**: ì—¬ëŸ¬ ë²„ì „ ì €ì¥ìœ¼ë¡œ ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì¦ê°€

### ë³´ì•ˆ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client App    â”‚    â”‚   Lambda/API     â”‚    â”‚  ECS Container  â”‚
â”‚                 â”‚    â”‚   (Presigned     â”‚    â”‚  (Processing)   â”‚
â”‚                 â”‚    â”‚    URL Only)     â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚ Presigned URL         â”‚ Direct Access         â”‚ Direct Access
         â”‚ (Temporary)           â”‚ (IAM Role)           â”‚ (IAM Role)
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    S3 Buckets                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ddn-in-bucket   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ ddn-out-bucket  â”‚          â”‚
â”‚  â”‚ (Input Images)  â”‚   Processing â”‚ (Output Images) â”‚          â”‚
â”‚  â”‚                 â”‚              â”‚                 â”‚          â”‚
â”‚  â”‚ - Public Block  â”‚              â”‚ - Public Block  â”‚          â”‚
â”‚  â”‚ - Versioning    â”‚              â”‚ - Versioning    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‘ï¸ s3_delete_bucket.sh

### ê¸°ëŠ¥
- S3 ë²„í‚· ë° ë‚´ë¶€ ê°ì²´ ì™„ì „ ì‚­ì œ
- ì•ˆì „í•œ ì •ë¦¬ ì‘ì—…

### ìƒì„¸ ë¶„ì„

#### 1. ë²„í‚·ë³„ ì‚­ì œ ë£¨í”„
```bash
for b in "$DDN_IN_BUCKET" "$DDN_OUT_BUCKET"; do
  echo "[INFO] Deleting bucket: $b"
  aws s3 rm "s3://$b" --recursive || true
  aws s3 rb "s3://$b" --force || true
done
```

**ì‚­ì œ ìˆœì„œ**:
1. **ê°ì²´ ì‚­ì œ**: `aws s3 rm --recursive`
   - ë²„í‚· ë‚´ ëª¨ë“  ê°ì²´ ë° ë²„ì „ ì‚­ì œ
   - ì¬ê·€ì ìœ¼ë¡œ ëª¨ë“  í´ë”/íŒŒì¼ ì²˜ë¦¬
2. **ë²„í‚· ì‚­ì œ**: `aws s3 rb --force`
   - ë¹ˆ ë²„í‚· ì‚­ì œ
   - `--force`: ë²„ì „ ê´€ë¦¬ëœ ê°ì²´ë„ ê°•ì œ ì‚­ì œ

#### 2. ì—ëŸ¬ ì²˜ë¦¬
```bash
|| true
```
- ë²„í‚·ì´ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ìŠ¤í¬ë¦½íŠ¸ ê³„ì† ì‹¤í–‰
- ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ì˜ ì•ˆì „ì„± ë³´ì¥

### ì£¼ì˜ì‚¬í•­
âš ï¸ **ë°ì´í„° ì†ì‹¤ ìœ„í—˜**: ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.
- ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë°±ì—… í™•ì¸ í›„ ì‹¤í–‰
- ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë³„ë„ ë°±ì—… ê¶Œì¥

---

## ğŸ“¤ s3_upload_file.sh

### ê¸°ëŠ¥
- ë¡œì»¬ íŒŒì¼ì„ S3 ì…ë ¥ ë²„í‚·ì— ì§ì ‘ ì—…ë¡œë“œ
- ê°œë°œ/í…ŒìŠ¤íŠ¸ ìš©ë„ì˜ ê°„ë‹¨í•œ ì—…ë¡œë“œ ë„êµ¬

### ìƒì„¸ ë¶„ì„

#### 1. íŒŒë¼ë¯¸í„° ì²˜ë¦¬
```bash
FILE_PATH=${1:-test_input.tif}
S3_KEY=${2:-user/test_input.tif}
```
- **ì²« ë²ˆì§¸ ì¸ì**: ì—…ë¡œë“œí•  ë¡œì»¬ íŒŒì¼ ê²½ë¡œ
- **ë‘ ë²ˆì§¸ ì¸ì**: S3ì—ì„œ ì‚¬ìš©í•  í‚¤(ê²½ë¡œ/íŒŒì¼ëª…)
- **ê¸°ë³¸ê°’**: ì¸ìê°€ ì—†ì„ ê²½ìš° í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‚¬ìš©

#### 2. íŒŒì¼ ì—…ë¡œë“œ
```bash
echo "[INFO] Uploading $FILE_PATH to s3://$DDN_IN_BUCKET/$S3_KEY"
aws s3 cp "$FILE_PATH" "s3://$DDN_IN_BUCKET/$S3_KEY"
```
- AWS CLIì˜ `s3 cp` ëª…ë ¹ì–´ ì‚¬ìš©
- ìë™ ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ (ëŒ€ìš©ëŸ‰ íŒŒì¼)
- ì§„í–‰ë¥  í‘œì‹œ ê¸°ëŠ¥

### ì‚¬ìš© ì˜ˆì‹œ
```bash
# ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ
./s3_upload_file.sh

# íŠ¹ì • íŒŒì¼ ì—…ë¡œë“œ
./s3_upload_file.sh /path/to/image.tif custom/path/image.tif

# ë°ëª¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ
./s3_upload_file.sh demo_image/static_demo_140um_madible_VD.tif demo/test.tif
```

---

## ğŸ“¥ s3_download_file.sh

### ê¸°ëŠ¥
- S3 ì…ë ¥ ë²„í‚·ì—ì„œ ë¡œì»¬ë¡œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ìš©ë„

### ìƒì„¸ ë¶„ì„

#### 1. íŒŒë¼ë¯¸í„° ì²˜ë¦¬
```bash
S3_KEY=${1:-raw/sample.txt}
LOCAL_PATH=${2:-download.txt}
```
- **ì²« ë²ˆì§¸ ì¸ì**: S3ì—ì„œ ë‹¤ìš´ë¡œë“œí•  ê°ì²´ í‚¤
- **ë‘ ë²ˆì§¸ ì¸ì**: ì €ì¥í•  ë¡œì»¬ ê²½ë¡œ
- **ê¸°ë³¸ê°’**: ìƒ˜í”Œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ

#### 2. íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```bash
echo "[INFO] Downloading s3://$DDN_IN_BUCKET/$S3_KEY to $LOCAL_PATH"
aws s3 cp "s3://$DDN_IN_BUCKET/$S3_KEY" "$LOCAL_PATH"
```
- ì§€ì •ëœ S3 ê°ì²´ë¥¼ ë¡œì»¬ì— ë³µì‚¬
- ë„¤íŠ¸ì›Œí¬ ì¤‘ë‹¨ ì‹œ ìë™ ì¬ì‹œë„
- ì²´í¬ì„¬ ê²€ì¦ìœ¼ë¡œ ë¬´ê²°ì„± ë³´ì¥

### ì‚¬ìš© ì˜ˆì‹œ
```bash
# ê¸°ë³¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
./s3_download_file.sh

# íŠ¹ì • íŒŒì¼ ë‹¤ìš´ë¡œë“œ
./s3_download_file.sh user/processed_image.tif ./result.tif

# ì²˜ë¦¬ëœ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
./s3_download_file.sh demo/processed.tif ./processed_demo.tif
```

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš° ì‹œë‚˜ë¦¬ì˜¤

### 1. ì´ˆê¸° ì„¤ì •
```bash
# S3 ë²„í‚· ìƒì„±
./s3_create_bucket.sh

# ë²„í‚· í™•ì¸
aws s3 ls | grep ddn-
```

### 2. ê°œë°œ/í…ŒìŠ¤íŠ¸ ì›Œí¬í”Œë¡œìš°
```bash
# 1. í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ
./s3_upload_file.sh demo_image/static_demo_140um_madible_VD.tif test/input.tif

# 2. ì²˜ë¦¬ ì§„í–‰ (Lambda/ECSë¥¼ í†µí•œ ì²˜ë¦¬)
# ... ì´ë¯¸ì§€ ì²˜ë¦¬ ê³¼ì • ...

# 3. ê²°ê³¼ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
./s3_download_file.sh test/output.tif ./result.tif
```

### 3. í”„ë¡œë•ì…˜ ì›Œí¬í”Œë¡œìš°
```
Client â†’ Presigned URL (Lambda) â†’ Direct Upload (S3) 
   â†“
S3 Input Bucket â†’ ECS Processing â†’ S3 Output Bucket
   â†“
Presigned URL (Lambda) â† Client Download â† S3 Output
```

### 4. ì •ë¦¬ ì‘ì—…
```bash
# ê°œë°œì´ ì™„ë£Œë˜ë©´ ë²„í‚· ì‚­ì œ
./s3_delete_bucket.sh
```

---

## ğŸ”§ ê³ ê¸‰ ì„¤ì •

### 1. ìƒëª… ì£¼ê¸° ì •ì±… ì„¤ì •
```bash
# 30ì¼ í›„ Standard-IAë¡œ ì´ë™, 90ì¼ í›„ Glacierë¡œ ì•„ì¹´ì´ë¸Œ
aws s3api put-bucket-lifecycle-configuration \
  --bucket ddn-in-bucket \
  --lifecycle-configuration file://lifecycle.json
```

**lifecycle.json ì˜ˆì‹œ**:
```json
{
  "Rules": [
    {
      "ID": "ImageProcessingLifecycle",
      "Status": "Enabled",
      "Transitions": [
        {
          "Days": 30,
          "StorageClass": "STANDARD_IA"
        },
        {
          "Days": 90,
          "StorageClass": "GLACIER"
        }
      ]
    }
  ]
}
```

### 2. ì•”í˜¸í™” ì„¤ì •
```bash
# AES-256 ì„œë²„ ì¸¡ ì•”í˜¸í™”
aws s3api put-bucket-encryption \
  --bucket ddn-in-bucket \
  --server-side-encryption-configuration '{
    "Rules": [
      {
        "ApplyServerSideEncryptionByDefault": {
          "SSEAlgorithm": "AES256"
        }
      }
    ]
  }'
```

### 3. êµì°¨ ë¦¬ì „ ë³µì œ
```bash
# ì¬í•´ ë³µêµ¬ë¥¼ ìœ„í•œ ë‹¤ë¥¸ ë¦¬ì „ìœ¼ë¡œ ë³µì œ ì„¤ì •
aws s3api put-bucket-replication \
  --bucket ddn-in-bucket \
  --replication-configuration file://replication.json
```

### 4. CloudTrail ì—°ë™
```bash
# S3 API í˜¸ì¶œ ë¡œê¹…
aws cloudtrail create-trail \
  --name ddn-s3-audit \
  --s3-bucket-name ddn-audit-logs
```

---

## ğŸ›¡ï¸ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

### 1. IAM ì •ì±… ìµœì†Œí™”
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": [
        "arn:aws:s3:::ddn-in-bucket/*",
        "arn:aws:s3:::ddn-out-bucket/*"
      ]
    }
  ]
}
```

### 2. VPC ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
```bash
# S3ìš© VPC ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
aws ec2 create-vpc-endpoint \
  --vpc-id vpc-026400b6f5ea5c7f6 \
  --service-name com.amazonaws.ap-northeast-2.s3 \
  --route-table-ids rtb-12345678
```

### 3. ì•¡ì„¸ìŠ¤ ë¡œê¹…
```bash
# S3 ì•¡ì„¸ìŠ¤ ë¡œê·¸ í™œì„±í™”
aws s3api put-bucket-logging \
  --bucket ddn-in-bucket \
  --bucket-logging-status '{
    "LoggingEnabled": {
      "TargetBucket": "ddn-access-logs",
      "TargetPrefix": "access-logs/"
    }
  }'
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ë¹„ìš© ê´€ë¦¬
- **ìŠ¤í† ë¦¬ì§€ ë¹„ìš©**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ì •ê¸°ì  ì •ë¦¬
- **ìš”ì²­ ë¹„ìš©**: GET/PUT ìš”ì²­ íšŸìˆ˜ ëª¨ë‹ˆí„°ë§
- **ë°ì´í„° ì „ì†¡**: ë¦¬ì „ ê°„ ì „ì†¡ ì‹œ ì¶”ê°€ ë¹„ìš©

### 2. ì„±ëŠ¥ ìµœì í™”
- **ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ**: ëŒ€ìš©ëŸ‰ íŒŒì¼ (100MB+) ì‹œ ìë™ ì ìš©
- **Transfer Acceleration**: ê¸€ë¡œë²Œ ì—…ë¡œë“œ ì„±ëŠ¥ í–¥ìƒ
- **CloudFront**: ë‹¤ìš´ë¡œë“œ ì„±ëŠ¥ ë° ë¹„ìš© ìµœì í™”

### 3. ë°ì´í„° ê´€ë¦¬
- **ë²„ì „ ê´€ë¦¬**: ìŠ¤í† ë¦¬ì§€ ë¹„ìš© ì¦ê°€ ìš”ì¸
- **ì¤‘ë³µ ì œê±°**: ë™ì¼í•œ íŒŒì¼ ì—…ë¡œë“œ ë°©ì§€
- **ë°±ì—… ì „ëµ**: ì¤‘ìš” ë°ì´í„° ë‹¤ì¤‘ ë°±ì—…

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. ë²„í‚· ìƒì„± ì‹¤íŒ¨
```bash
# ë²„í‚·ëª… ì¤‘ë³µ í™•ì¸
aws s3api head-bucket --bucket ddn-in-bucket

# ë¦¬ì „ë³„ ì œì•½ í™•ì¸
aws s3api get-bucket-location --bucket ddn-in-bucket
```

### 2. ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨
```bash
# ê¶Œí•œ í™•ì¸
aws s3api get-bucket-policy --bucket ddn-in-bucket

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° í…ŒìŠ¤íŠ¸
aws s3 ls s3://ddn-in-bucket/
```

### 3. í¼ë¸”ë¦­ ì ‘ê·¼ ë¬¸ì œ
```bash
# í¼ë¸”ë¦­ ì ‘ê·¼ ì°¨ë‹¨ ìƒíƒœ í™•ì¸
aws s3api get-public-access-block --bucket ddn-in-bucket

# ë²„í‚· ì •ì±… í™•ì¸
aws s3api get-bucket-policy --bucket ddn-in-bucket
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### 1. CloudWatch ë©”íŠ¸ë¦­
- **BucketSizeBytes**: ë²„í‚· í¬ê¸° ëª¨ë‹ˆí„°ë§
- **NumberOfObjects**: ê°ì²´ ìˆ˜ ì¶”ì 
- **AllRequests**: API ìš”ì²­ ìˆ˜ ëª¨ë‹ˆí„°ë§

### 2. ë¹„ìš© ë¶„ì„
```bash
# AWS Cost Explorer APIë¥¼ í†µí•œ S3 ë¹„ìš© ë¶„ì„
aws ce get-cost-and-usage \
  --time-period Start=2024-01-01,End=2024-01-31 \
  --granularity MONTHLY \
  --metrics BlendedCost \
  --group-by Type=DIMENSION,Key=SERVICE
```

### 3. ì‚¬ìš©ëŸ‰ ë³´ê³ ì„œ
```bash
# S3 ì¸ë²¤í† ë¦¬ ì„¤ì •
aws s3api put-bucket-inventory-configuration \
  --bucket ddn-in-bucket \
  --id DailyInventory \
  --inventory-configuration file://inventory.json
```

---

## ğŸš€ ìë™í™” ìŠ¤í¬ë¦½íŠ¸

### 1. ë°°ì¹˜ ì—…ë¡œë“œ
```bash
#!/bin/bash
# í´ë” ë‚´ ëª¨ë“  ì´ë¯¸ì§€ ì—…ë¡œë“œ
for file in images/*.tif; do
  filename=$(basename "$file")
  ./s3_upload_file.sh "$file" "batch/$filename"
done
```

### 2. ì •ë¦¬ ì‘ì—…
```bash
#!/bin/bash
# 7ì¼ ì´ìƒëœ ì„ì‹œ íŒŒì¼ ì‚­ì œ
aws s3api list-objects-v2 --bucket ddn-in-bucket --prefix temp/ \
  --query "Contents[?LastModified<='$(date -d '7 days ago' -Iseconds)'].Key" \
  --output text | xargs -I {} aws s3 rm s3://ddn-in-bucket/{}
```

### 3. ë°±ì—… ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# ë‹¤ë¥¸ ë¦¬ì „ìœ¼ë¡œ ì¤‘ìš” íŒŒì¼ ë°±ì—…
aws s3 sync s3://ddn-out-bucket/important/ \
  s3://ddn-backup-bucket-us-west-2/backup/ \
  --region us-west-2
```